{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% get_media_prefix as MEDIA_URL %}

{% block content %}
  <div class="container mt-4 text-center">

    <div class="profile-picture-div mb-3">
      {% if user_obj.profile_picture %}
          <img src="{{ user_obj.profile_picture.url }}" alt="Profil" class="profile-picture" width="120" height="120">
      {% else %}
          <img src="{{ MEDIA_URL }}default.jpg" alt="Profil" class="profile-picture" width="120" height="120">
      {% endif %}
    </div>

    <h2 class="fs-2 profile-username d-inline">{{ user_obj.username }}</h2>
    {% if user_obj.username == "ridvan" %}
        <span class="badge bg-danger fs-6 align-middle ms-2">Admin</span>
    {% endif %}

    <p class="text-muted">{{ user_obj.name }}</p>

    {% if is_owner %}
      <button class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target="#editForm">
        Profili Düzenle
      </button>
    {% endif %}

    <hr>

    <p>{{ user_obj.bio|default:"Henüz biyografi eklenmedi." }}</p>
    <p><strong>E-posta:</strong> {{ user_obj.email|default:"—" }}</p>
    <p><strong>Katılma tarihi:</strong> {{ user_obj.joined_at|date:"d.m.Y"|default:"—" }}</p>

    {% if is_owner %}
    <div class="collapse mt-4" id="editForm">
      <h4>Profili Düzenle</h4>
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-success">Kaydet</button>
      </form>
    </div>
    {% endif %}
  </div>

{% endblock %}
